(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesA-my_zc_edit-my_zc_edit"],{"01ad":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,".minh100[data-v-4ea0dbc4]{padding-bottom:%?50?%}.box_bg[data-v-4ea0dbc4]{width:100%;height:auto;position:absolute;top:0;z-index:0}.box_main[data-v-4ea0dbc4]{position:relative;top:0;z-index:1;padding:%?170?% %?30?% 0}.box_main_form[data-v-4ea0dbc4]{width:100%;background:#fff;border-radius:%?10?%;padding:0 %?30?%}.box_main_form_li[data-v-4ea0dbc4]{width:%?690?%;width:100%;border-bottom:1px solid #eee}.form_li_tit[data-v-4ea0dbc4]{font-size:%?30?%;color:#222;height:%?90?%;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.form_li_main[data-v-4ea0dbc4]{padding-bottom:%?25?%;font-size:%?30?%;color:#222}.form_li_main uni-input[data-v-4ea0dbc4]{min-width:0;font-size:%?30?%}.content_text[data-v-4ea0dbc4]{width:100%;height:%?283?%;background:#efefef;border-radius:%?4?%;padding:%?20?%;font-size:%?30?%}.sub_btn[data-v-4ea0dbc4]{width:100%;height:%?86?%;background:-webkit-linear-gradient(right,#fc5534,#ffbe33);background:linear-gradient(-90deg,#fc5534,#ffbe33);border-radius:%?4?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?30?%;color:#fff;margin:%?50?% auto 0}.pz1_box[data-v-4ea0dbc4]{width:100%;background:#fff;padding:0 %?30?% %?50?%}.pz1_tit[data-v-4ea0dbc4]{width:100%;font-size:%?30?%;color:#222;line-height:%?88?%}.pz_imgs[data-v-4ea0dbc4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;padding-bottom:%?30?%;border-bottom:1px solid #eee}.pz_img[data-v-4ea0dbc4]{\n\t/* width: 180upx;\n\theight: 140upx; */width:%?190?%;border-radius:%?10?%;margin-right:%?15?%;margin-bottom:%?15?%;position:relative}.pz_img uni-image[data-v-4ea0dbc4]{\n\t/* width: 180upx;\n\theight: 140upx; */width:%?190?%;height:%?190?%}.pz_img .img_del[data-v-4ea0dbc4]{width:%?30?%;height:%?30?%;\n\t/* background: #FF4B4B; */border-radius:%?15?%;position:absolute;top:%?-10?%;right:%?-10?%;z-index:10}",""]),t.exports=i},"0ae1":function(t,i,e){"use strict";var a=e("fefd"),n=e.n(a);n.a},2145:function(t,i,e){t.exports=e.p+"static/img/loading.79a1a107.gif"},"2bb6":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return a}));var a={z_text:e("e956").default},n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"minh100"},[a("z_text"),1==t.htmlReset?a("v-uni-view",{staticClass:"zanwu",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onRetry.apply(void 0,arguments)}}},[t._v("请求失败，请点击重试")]):t._e(),-1==t.htmlReset?a("v-uni-view",{staticClass:"loading_def"},[a("v-uni-image",{staticClass:"loading_def_img",attrs:{src:e("2145"),mode:""}})],1):t._e(),0==t.htmlReset?a("v-uni-view",[a("v-uni-image",{staticClass:"box_bg",attrs:{src:e("7ed5"),mode:"widthFix"}}),a("v-uni-view",{staticClass:"box_main"},[a("v-uni-view",{staticClass:"box_main_form"},[a("v-uni-view",{staticClass:"box_main_form_li"},[a("v-uni-view",{staticClass:"form_li_tit"},[t._v("标题")]),a("v-uni-view",{staticClass:"dis_flex aic form_li_main"},[a("v-uni-input",{staticClass:"flex_1",attrs:{type:"text",placeholder:"请填写发起标题"},model:{value:t.datas.title,callback:function(i){t.$set(t.datas,"title",i)},expression:"datas.title"}})],1)],1),a("v-uni-view",{staticClass:"box_main_form_li"},[a("v-uni-view",{staticClass:"form_li_tit"},[t._v("目标金额")]),a("v-uni-view",{staticClass:"dis_flex aic form_li_main"},[a("v-uni-input",{staticClass:"flex_1",attrs:{type:"number",placeholder:"请填写筹款目标金额，例100000"},model:{value:t.datas.total_raise_funds,callback:function(i){t.$set(t.datas,"total_raise_funds",i)},expression:"datas.total_raise_funds"}}),a("v-uni-view",[t._v("元")])],1)],1),a("v-uni-view",{staticClass:"box_main_form_li"},[a("v-uni-view",{staticClass:"form_li_tit"},[t._v("发起人姓名")]),a("v-uni-view",{staticClass:"dis_flex aic form_li_main"},[a("v-uni-input",{staticClass:"flex_1",attrs:{type:"text",placeholder:"请填写发起人真实姓名"},model:{value:t.datas.initiator_name,callback:function(i){t.$set(t.datas,"initiator_name",i)},expression:"datas.initiator_name"}})],1)],1),a("v-uni-view",{staticClass:"box_main_form_li"},[a("v-uni-view",{staticClass:"form_li_tit"},[t._v("发起人联系方式")]),a("v-uni-view",{staticClass:"dis_flex aic form_li_main"},[a("v-uni-input",{staticClass:"flex_1",attrs:{type:"number",placeholder:"请填写您的常用手机号"},model:{value:t.datas.initiator_phone,callback:function(i){t.$set(t.datas,"initiator_phone",i)},expression:"datas.initiator_phone"}})],1)],1),a("v-uni-view",{staticClass:"box_main_form_li"},[a("v-uni-view",{staticClass:"form_li_tit"},[t._v("患者姓名")]),a("v-uni-view",{staticClass:"dis_flex aic form_li_main"},[a("v-uni-input",{staticClass:"flex_1",attrs:{type:"text",placeholder:"请填写患者姓名"},model:{value:t.datas.patient_name,callback:function(i){t.$set(t.datas,"patient_name",i)},expression:"datas.patient_name"}})],1)],1),a("v-uni-view",{staticClass:"box_main_form_li"},[a("v-uni-view",{staticClass:"form_li_tit"},[t._v("患者年龄")]),a("v-uni-view",{staticClass:"dis_flex aic form_li_main"},[a("v-uni-input",{staticClass:"flex_1",attrs:{type:"number",placeholder:"请填写患者年龄"},model:{value:t.datas.patient_age,callback:function(i){t.$set(t.datas,"patient_age",i)},expression:"datas.patient_age"}})],1)],1),a("v-uni-view",{staticClass:"box_main_form_li"},[a("v-uni-view",{staticClass:"form_li_tit"},[t._v("患者家庭住址")]),a("v-uni-view",{staticClass:"dis_flex aic form_li_main"},[a("v-uni-input",{staticClass:"flex_1",attrs:{type:"text",placeholder:"请填写患者家庭住址"},model:{value:t.datas.patient_address,callback:function(i){t.$set(t.datas,"patient_address",i)},expression:"datas.patient_address"}})],1)],1),a("v-uni-view",{staticClass:"box_main_form_li"},[a("v-uni-view",{staticClass:"form_li_tit"},[t._v("患者疾病名称")]),a("v-uni-view",{staticClass:"dis_flex aic form_li_main"},[a("v-uni-input",{staticClass:"flex_1",attrs:{type:"text",placeholder:"请填写患者疾病名称"},model:{value:t.datas.patient_illness,callback:function(i){t.$set(t.datas,"patient_illness",i)},expression:"datas.patient_illness"}})],1)],1),a("v-uni-picker",{attrs:{mode:"selector",range:t.zc_list,"range-key":"title","data-type":"1"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.getPicker.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"box_main_form_li"},[a("v-uni-view",{staticClass:"form_li_tit"},[t._v("所属类别")]),a("v-uni-view",{staticClass:"dis_flex aic form_li_main"},[a("v-uni-view",{staticClass:"flex_1"},[t._v(t._s(t.zc_list[t.zc_index].title))])],1)],1)],1),a("v-uni-view",{staticClass:"box_main_form_li"},[a("v-uni-view",{staticClass:"form_li_tit"},[t._v("众筹类型")]),a("v-uni-view",{staticClass:"dis_flex aic form_li_main"},[a("v-uni-input",{staticClass:"flex_1",attrs:{type:"text",placeholder:"请填写众筹类型(1~4个字)",maxlength:"4"},model:{value:t.datas.genre,callback:function(i){t.$set(t.datas,"genre",i)},expression:"datas.genre"}})],1)],1),a("v-uni-view",{staticClass:"box_main_form_li"},[a("v-uni-view",{staticClass:"form_li_tit"},[t._v("标签")]),a("v-uni-view",{staticClass:"dis_flex aic form_li_main"},[a("v-uni-textarea",{staticClass:"content_text",attrs:{placeholder:"请输入标签(每个标签已回车区分,每行一个)"},model:{value:t.datas.label,callback:function(i){t.$set(t.datas,"label",i)},expression:"datas.label"}})],1)],1),a("v-uni-view",{staticClass:"box_main_form_li"},[a("v-uni-view",{staticClass:"form_li_tit"},[t._v("详情内容")]),a("v-uni-view",{staticClass:"dis_flex aic form_li_main"},[a("v-uni-textarea",{staticClass:"content_text",attrs:{placeholder:"请输入"},model:{value:t.datas.content,callback:function(i){t.$set(t.datas,"content",i)},expression:"datas.content"}})],1)],1),a("v-uni-view",{staticClass:"pz1_tit"},[t._v("封面图：")]),a("v-uni-view",{staticClass:"pz_imgs"},[t._l(t.sj_img,(function(i,e){return t.sj_img.length>0?a("v-uni-view",{staticClass:"pz_img"},[a("v-uni-image",{staticClass:"img_del",attrs:{src:"/static/images/img_del.png",mode:"aspectFill","data-idx":e,"data-type":"1"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.imgdel.apply(void 0,arguments)}}}),a("v-uni-image",{attrs:{mode:"aspectFill",src:t.getimg(i),"data-src":t.getimg(i)},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.pveimg.apply(void 0,arguments)}}})],1):t._e()})),t.sj_img.length<9?a("v-uni-view",{staticClass:"pz_img"},[a("v-uni-image",{attrs:{src:"/static/images/upimg1.png",mode:"aspectFit","data-type":"1 "},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.upimg.apply(void 0,arguments)}}})],1):t._e()],2),a("v-uni-view",{staticClass:"pz1_tit"},[t._v("详情图：")]),a("v-uni-view",{staticClass:"pz_imgs"},[t._l(t.sj_img2,(function(i,e){return t.sj_img2.length>0?a("v-uni-view",{staticClass:"pz_img"},[a("v-uni-image",{staticClass:"img_del",attrs:{src:"/static/images/img_del.png",mode:"aspectFill","data-idx":e,"data-type":"2"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.imgdel.apply(void 0,arguments)}}}),a("v-uni-image",{attrs:{mode:"aspectFill",src:t.getimg(i),"data-src":t.getimg(i)},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.pveimg.apply(void 0,arguments)}}})],1):t._e()})),t.sj_img2.length<9?a("v-uni-view",{staticClass:"pz_img"},[a("v-uni-image",{attrs:{src:"/static/images/upimg1.png","data-type":"2",mode:"aspectFit"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.upimg.apply(void 0,arguments)}}})],1):t._e()],2),a("v-uni-view",{staticClass:"sub_btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.sub.apply(void 0,arguments)}}},[t._v("发布")])],1)],1)],1):t._e()],1)},s=[]},4815:function(t,i,e){"use strict";e.r(i);var a=e("2bb6"),n=e("4d3e");for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("0ae1");var o,l=e("f0c5"),c=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"4ea0dbc4",null,!1,a["a"],o);i["default"]=c.exports},"4d3e":function(t,i,e){"use strict";e.r(i);var a=e("a16b"),n=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(i,t,(function(){return a[t]}))}(s);i["default"]=n.a},"7ed5":function(t,i,e){t.exports=e.p+"static/img/fq_banner_02.55bfb9bb.jpg"},a16b:function(t,i,e){"use strict";var a=e("4ea4");e("99af"),e("a15b"),e("a434"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,s=a(e("5530")),o=a(e("e143")),l=a(e("274d")),c=e("2f62"),d={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,htmlReset:-1,data_last:!1,id:"",datas:{title:"",genre:"",total_raise_funds:"",initiator_name:"",initiator_phone:"",patient_name:"",patient_age:"",patient_address:"",patient_illness:"",label:"",category_id:"1",content:""},zc_list:[{id:1,name:"类型1"},{id:2,name:"类型2"},{id:3,name:"类型3"},{id:4,name:"类型4"}],zc_index:0,sj_img:[],sj_img2:[]}},computed:(0,s.default)((0,s.default)({},(0,c.mapState)(["hasLogin","userName","loginDatas"])),{},{style:function(){var t=this.StatusBar,i=this.CustomBar,e="height:".concat(i,"px;padding-top:").concat(t,"px;");return e},style1:function(){var t=this.StatusBar,i="top:".concat(t,"px;");return i}}),onPageScroll:function(t){this.PageScroll=t.scrollTop},onPullDownRefresh:function(){uni.stopPullDownRefresh()},onLoad:function(t){if(n=this,n.id=t.id,uni.getStorageSync("cate_list"))if(uni.getStorageSync("cate_list")){console.log(uni.getStorageSync("cate_list"));var i=JSON.parse(uni.getStorageSync("cate_list"));n.zc_list=i,n.fw_cur=i[0].id,o.default.set(n.datas,"category_id",i[0].id)}else n.getcate();else n.getcate();n.onRetry()},methods:(0,s.default)((0,s.default)({},(0,c.mapMutations)(["login","logindata","logout","setplatform"])),{},{onRetry:function(){n.htmlReset=0,n.getdata()},getcate:function(){var t={type:1},i="/cate/list";l.default.P_get(i,t).then((function(t){if(n.btn_kg=0,console.log(t),1==t.code){var i=t.data;console.log(typeof i),"string"==typeof i&&(i=JSON.parse(i)),n.zc_list=i,n.fw_cur=i[0].id,o.default.set(n.datas,"category_id",i[0].id),i.length>0&&uni.setStorageSync("cate_list",cate_list),console.log(i)}else t.msg?uni.showToast({icon:"none",title:t.msg}):uni.showToast({icon:"none",title:"获取失败"})})).catch((function(t){n.btn_kg=0,console.log(t),uni.showToast({icon:"none",title:"获取数据失败"})}))},sub:function(){console.log(n.datas);var t=JSON.parse(JSON.stringify(n.datas));if(n.datas.title)if(n.datas.total_raise_funds)if(n.datas.initiator_name)if(n.datas.initiator_phone)if(n.datas.patient_name)if(n.datas.patient_age)if(n.datas.patient_address)if(n.datas.patient_illness){var i="";if(console.log(n.sj_img),n.sj_img.length>0){i=n.sj_img.join(",");var e="";n.sj_img2.length>0&&(e=n.sj_img2.join(",")),o.default.set(t,"banner_pic",i),o.default.set(t,"content_img",e),o.default.set(t,"token",n.$store.state.loginDatas.userToken),console.log(t);var a="/user/crowdfundProject/save";1!=n.btn_kg&&(n.btn_kg=1,uni.showLoading({title:"正在提交"}),l.default.P_post(a,t).then((function(t){if(n.btn_kg=0,console.log(t),1==t.code){var i=t.data;console.log(typeof i),"string"==typeof i&&(i=JSON.parse(i)),uni.showToast({icon:"none",title:"提交成功"}),setTimeout((function(){uni.navigateBack({delta:1})}),1e3)}else t.msg?uni.showToast({icon:"none",title:t.msg}):uni.showToast({icon:"none",title:"操作失败"})})).catch((function(t){n.btn_kg=0,console.log(t),uni.showToast({icon:"none",title:"获取数据失败"})})))}else uni.showToast({icon:"none",title:"请上传封面图"})}else uni.showToast({icon:"none",title:"请输入患者疾病名称"});else uni.showToast({icon:"none",title:"请输入患者家庭住址"});else uni.showToast({icon:"none",title:"请输入患者年龄"});else uni.showToast({icon:"none",title:"请输入患者姓名"});else uni.showToast({icon:"none",title:"请输入发起人联系方式"});else uni.showToast({icon:"none",title:"请输入发起人"});else uni.showToast({icon:"none",title:"请输入目标金额"});else uni.showToast({icon:"none",title:"请输入标题"})},getPicker:function(t){console.log(t.currentTarget.dataset.type);var i=t.currentTarget.dataset;1==i.type&&(n.zc_index=t.detail.value,o.default.set(n.datas,"category_id",n.zc_list[n.zc_index].id))},getindex:function(t,i){if(t.length>0){for(var e=0;e<t.length;e++)if(t[e].id==i)return e;return 0}return-1},getdata:function(){var t=this,i={token:t.$store.state.loginDatas.userToken,id:t.id},e="/user/crowdfundProject/look";uni.showLoading({title:"正在获取数据"}),l.default.P_get(e,i).then((function(i){if(t.btn_kg=0,console.log(i),1==i.code){var e=i.data;console.log(typeof e),"string"==typeof e&&(e=JSON.parse(e)),t.datas=e,e.banner_pic.length>0&&(t.sj_img=e.banner_pic),e.content_img.length>0&&(t.sj_img2=e.content_img),console.log(e)}else i.msg?uni.showToast({icon:"none",title:i.msg}):uni.showToast({icon:"none",title:"操作失败"})})).catch((function(i){t.btn_kg=0,console.log(i),uni.showToast({icon:"none",title:"获取数据失败"})}))},jump:function(t){var i=this;1!=i.btn_kg&&(i.btn_kg=1,setTimeout((function(){i.btn_kg=0}),1e3),l.default.jump(t))},getimg:function(t){return l.default.getimg(t)},pveimg:function(t){l.default.pveimg(t)},upimg:function(t){var i=this,e=t.currentTarget.dataset,a=9-i.sj_img.length;2==e.type&&(a=9-i.sj_img2.length),uni.showActionSheet({itemList:["拍照","相册"],success:function(t){console.log("选中了第"+(t.tapIndex+1)+"个按钮");var n=["camera","album"];n=0==t.tapIndex?["camera"]:["album"],uni.chooseImage({count:a,sizeType:["original","compressed"],sourceType:n,success:function(t){console.log(t);var a=t.tempFilePaths;i.upimg1(a,e.type,0)}})},fail:function(t){console.log(t.errMsg)}})},upimg1:function(t,i,e){var a=this;l.default.wx_upload(t[e]).then((function(n){if(a.btn_kg=0,console.log(n),1==n.code){var s,o=n.msg;console.log(e),2==i?(a.sj_img2.push(o),s=a.sj_img2.length):(a.sj_img.push(o),s=a.sj_img.length),console.log(s<9),console.log(e<t.length-1),console.log(s<9&&e<t.length-1),s<9&&e<t.length-1&&(e++,a.upimg1(t,i,e))}else n.msg?uni.showToast({icon:"none",title:n.msg}):uni.showToast({icon:"none",title:"上传失败"})})).catch((function(t){a.btn_kg=0,console.log(t),uni.showToast({icon:"none",title:"操作失败"})}))},imgdel:function(t){var i=this;console.log(t.currentTarget.dataset.idx);var e=t.currentTarget.dataset;uni.showModal({title:"提示",content:"确定要删除这张图片吗",success:function(a){a.confirm?(console.log("用户点击确定",t.currentTarget.dataset.type),2==e.type?i.sj_img2.splice(e.idx,1):i.sj_img.splice(e.idx,1)):a.cancel&&console.log("用户点击取消")}})}})};i.default=d},fefd:function(t,i,e){var a=e("01ad");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("ea77a594",a,!0,{sourceMap:!1,shadowMode:!1})}}]);